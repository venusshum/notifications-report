{
  "cubes": [
      {
          "name": "ft_billing",
          "dimensions": ["dm_service", "dm_datetime", "dm_template"],
          "joins": [
              {"master":"dm_service", "detail":"dm_service.service_id"},
              {"master":"dm_datetime", "detail":"dm_datetime.bst_date"},
              {"master":"dm_template", "detail":"dm_template.template_id"}
          ],
          "measures": [
            {"name":"billable_unit", "label":"billable_unit"},
            {"name":"billing_total", "label":"billing_total"}
          ],
          "aggregates": [
                    {
                        "name": "amount_sum",
                        "function": "sum",
                        "measure": "billable_unit"
                    },
                    {
                        "name": "billing_sum",
                        "function": "sum",
                        "measure": "billing_total"
                    },
                    {
                        "name": "record_count",
                        "function": "count"
                    }
          ],
          "mappings": {
            "service_name": "dm_service.service_name"
          }
      }
  ],
  "dimensions": [
      {"name": "dm_service",
       "levels":[
         {"name": "crown", "attributes": ["crown"] },
         {"name": "service_name", "attributes": ["service_name"], "label":"Service name"},
         {"name": "organisation_type", "attributes": ["organisation_type"], "label":"Organisation Type"},
         {"name": "organisation", "attributes": ["organisation"], "label":"Organisation Name"}
       ],
       "hierarchies":[
         {"name":"cs", "levels":["crown", "organisation_type", "service_name"]},
         {"name":"org", "levels":["crown", "organisation", "service_name"]}
       ],
        "default_hierarchy_name": "cs",
       "label":"Services"
     },
     {"name": "dm_datetime",
       "levels":[
        { "name": "year", "attributes": ["year"] },
        { "name": "month", "attributes": ["monthname"] },
        { "name": "day", "attributes": ["bst_day"] }
       ],
       "hierarchies":[
        {"name": "ymd", "levels":["year", "month", "day"]}
      ],
      "label":"Date"
     },
     {"name": "dm_template",
       "levels":[
        { "name": "type", "attributes": ["type"] },
        { "name": "template_name", "attributes": ["template_name"] }
       ],
       "hierarchies":[
        {"name": "tt", "levels":["type", "template_name"]}
      ],
      "label":"Template"
     }
  ]
}
